{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/settings.js","../src/js/pixabay-api.js","../src/js/helpers.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\"\nimport \"simplelightbox/dist/simple-lightbox.min.css\"\nconst gallery = document.querySelector(\".gallery\"),\n\tloader = gallery.querySelector(\".loader\"),\n\tloadMore = gallery.querySelector(\".more\")\nlet globalLightbox\nconst showLoader = () => loader.classList.remove(\"visually-hidden\")\nconst hideLoader = () => loader.classList.add(\"visually-hidden\")\nconst showLoadMoreButton = () => loadMore.classList.remove(\"visually-hidden\")\nconst hideLoadMoreButton = () => loadMore.classList.add(\"visually-hidden\")\nconst clearGallery = () =>\n\tgallery.querySelectorAll(\".gallery-item\").forEach(i => i.remove())\nconst createMarkup = ({\n\twebformatURL,\n\tlargeImageURL,\n\ttags,\n\tlikes,\n\tviews,\n\tcomments,\n\tdownloads,\n}) => {\n\treturn `\n\t<li class=\"gallery-item\">\n\t\t<a href=\"${largeImageURL}\">\n\t\t\t<img src=\"${webformatURL}\" data-src=\"${largeImageURL}\" alt=\"${tags}\" />\n\t\t</a>\n\t\t<div class=\"info\">\n\t\t\t<p>\n\t\t\t\t<b>Likes</b>\n\t\t\t\t${likes}\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<b>Views</b>\n\t\t\t\t${views}\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<b>Comments</b>\n\t\t\t\t${comments}\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<b>Downloads</b>\n\t\t\t\t${downloads}\n\t\t\t</p>\n\t\t</div>\n\t</li>\n\t`\n}\nconst createGallery = images => {\n\tconst itemsMarkup = images.reduce(\n\t\t(acc, item) => (acc += createMarkup(item)),\n\t\t\"\"\n\t)\n\tgallery\n\t\t.querySelector(\".helpers\")\n\t\t.insertAdjacentHTML(\"beforebegin\", itemsMarkup)\n\tif (!globalLightbox) {\n\t\tglobalLightbox = new SimpleLightbox(\".gallery a\", {\n\t\t\tcaptionsData: \"alt\",\n\t\t\tcaptionDelay: 250,\n\t\t})\n\t} else globalLightbox.refresh()\n}\n\nexport {\n\tshowLoader,\n\thideLoader,\n\tshowLoadMoreButton,\n\thideLoadMoreButton,\n\tclearGallery,\n\tcreateMarkup,\n\tcreateGallery,\n}\n","export const PIXABAY_API_KEY = \"50513820-fe52286b6fb0f12cd684dc96e\"\nexport const PIXABAY_API_PER_PAGE = 15","import axios from \"axios\"\nimport { PIXABAY_API_KEY, PIXABAY_API_PER_PAGE } from \"./settings\"\naxios.defaults.baseURL = \"https://pixabay.com/api/\"\nexport const getImagesByQuery = async (query, page) => {\n\tconst response = await axios\n\t\t.get(\"\", {\n\t\t\tparams: {\n\t\t\t\tkey: PIXABAY_API_KEY,\n\t\t\t\tq: query,\n\t\t\t\tpage,\n\t\t\t\tper_page: PIXABAY_API_PER_PAGE,\n\t\t\t\timage_type: \"photo\",\n\t\t\t\torientation: \"horizontal\",\n\t\t\t\tsafesearch: true,\n\t\t\t},\n\t\t})\n\treturn response.data\n}\n","import { getImagesByQuery } from \"./pixabay-api\"\nimport {\n\tcreateGallery,\n\tshowLoader,\n\thideLoader,\n\tshowLoadMoreButton,\n\thideLoadMoreButton,\n} from \"./render-functions\"\nimport { PIXABAY_API_PER_PAGE } from \"./settings\"\nimport iziToast from \"izitoast\"\nimport \"izitoast/dist/css/iziToast.min.css\"\nlet page = 1\nconst gallery = document.querySelector(\".gallery\")\nconst resetPage = () => (page = 1)\nconst getQuery = target => {\n\tconst query = target.elements[\"search-text\"].value.trim() || \"\"\n\tif (!query) {\n\t\tiziToast.error({\n\t\t\ttitle: \"Error!\",\n\t\t\tmessage: \"Failed to load images\",\n\t\t})\n\t\treturn false\n\t}\n\treturn query\n}\nconst loadData = async query => {\n\thideLoadMoreButton()\n\tshowLoader()\n\tgetImagesByQuery(query, page)\n\t\t.then(({ hits, totalHits }) => {\n\t\t\tif (!hits.length) {\n\t\t\t\tiziToast.error({\n\t\t\t\t\ttitle: \"Error!\",\n\t\t\t\t\tmessage:\n\t\t\t\t\t\t\"Sorry, there are no images matching your search query. Please try again!\",\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\tcreateGallery(hits)\n\t\t\tif (page * PIXABAY_API_PER_PAGE < totalHits) {\n\t\t\t\tpage += 1\n\t\t\t\tshowLoadMoreButton()\n\t\t\t} else {\n\t\t\t\thideLoadMoreButton()\n\t\t\t\tiziToast.info({\n\t\t\t\t\tmessage: \"We're sorry, but you've reached the end of search results.\",\n\t\t\t\t})\n\t\t\t}\n\t\t\tscrollBy({\n\t\t\t\ttop: -gallery.getBoundingClientRect().y * 2,\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t})\n\t\t})\n\t\t.catch(() => {\n\t\t\tiziToast.error({\n\t\t\t\ttitle: \"Error!\",\n\t\t\t\tmessage: \"Failed to load images\",\n\t\t\t})\n\t\t})\n\t\t.finally(hideLoader)\n}\nexport { getQuery, loadData, resetPage }\n","import { clearGallery } from \"./js/render-functions\"\nimport { getQuery, loadData, resetPage } from \"./js/helpers\"\nconst form = document.querySelector(\".form\"),\n\tloadMore = document.querySelector(\".gallery .more\")\nform.addEventListener(\"submit\", async e => {\n\te.preventDefault()\n\tconst query = getQuery(e.target)\n\tif (!query) return\n\tresetPage()\n\tclearGallery()\n\tawait loadData(query)\n})\nloadMore.addEventListener(\"click\", async e => {\n\te.preventDefault()\n\tconst query = getQuery(form)\n\tif (!query) return\n\tawait loadData(query)\n})\n"],"names":["gallery","loader","loadMore","globalLightbox","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","clearGallery","i","createMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","createGallery","images","itemsMarkup","acc","item","SimpleLightbox","PIXABAY_API_KEY","PIXABAY_API_PER_PAGE","axios","getImagesByQuery","query","page","resetPage","getQuery","target","iziToast","loadData","hits","totalHits","form","e"],"mappings":"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"}